---
title: 概要
metaTitle: 概要 | Token Auth Rules
description: NFT権限の高レベル概要を提供します。
---
Token Authorization Rules（Token Auth Rulesとも呼ばれる）は、SPLトークン上で実行される命令の権限を評価するための高度なメタプログラミングツールです。このプログラム自体は、特定の条件を表すルールの集合であるルールセットの作成と更新に使用できます。

## はじめに
トークン操作が実行されると、プログラムは命令の詳細（例：トークン転送の宛先アドレス）とともに呼び出され、これらの詳細がルールセットに対して検証されます。ルールが無効と評価された場合、命令は失敗し、トランザクション全体が取り消されます。これにより、トークン操作をToken Auth Rulesプログラムと結合するトランザクション全体を構築でき、関連するルールセット内のルールに違反した場合、トランザクション全体、したがって含まれるトークン操作が取り消されます。

## 機能

[ルールセットの作成または更新](/jp/token-auth-rules/create-or-update) - ルールセットの内容を初期化および更新するために使用される命令。

[ルールセットバッファ](/jp/token-auth-rules/buffers) - 大きなルールセットの処理方法。

[ルールセットの検証](/jp/token-auth-rules/validate) - ルールセットの検証方法。

## ルールタイプ
認可ルールは、`validate()`メソッドを実装する`Rule`列挙型のバリアントです。

**プリミティブルール**と、1つ以上のプリミティブルールを組み合わせて作成される**コンポジットルール**があります。

**プリミティブルール**は評価に必要なアカウントやデータを格納し、実行時に`validate()`関数に渡されるアカウントと明確に定義された`Payload`に基づいてtrueまたはfalseの出力を生成します。

**コンポジットルール**は、プリミティブルールのいずれかまたは全てがtrueを返すかどうかに基づいてtrueまたはfalseを返します。コンポジットルールは、より複雑な論理を実装するより高レベルなコンポジットルールに組み合わせることができます。`Rule`列挙型の再帰的定義により、トップレベルのコンポジットルールで`validate()`を呼び出すと、トップから開始して各レベルで検証を行い、構成要素であるプリミティブルールまで検証が実行されます。

## オペレーション
ルールセットは`HashMap`データ構造上に構築され、トークンで使用される可能性のある異なる命令タイプ（例：transfer、delegate、burnなど）のさまざまなルールセットを格納することを目的としています。Token Auth Rulesでは、これらのさまざまな命令を**オペレーション**と呼び、**オペレーション**は`HashMap`データ構造のキーとして使用されます。各**オペレーション**は、異なる関連ルールセットを持つことができます。

### シナリオ
**シナリオ**は**オペレーション**への任意の追加であり、命令が呼び出される可能性のあるより具体的な状況を処理するために使用されます。データ形式の観点から、**オペレーション**と**シナリオ**の組み合わせは、コロン`<Operation>:<Scenario>`で区切られた2つの文字列です。例えば、Token Metadataは、Token MetadataからToken Auth Rulesへの呼び出しで権限タイプを**シナリオ**として使用します。Transfer**オペレーション**は、トークンの所有者またはデリゲートのどちらかによってトークン上でトリガーされる可能性があり、ルールセットマネージャーはこれらの異なるシナリオを異なるルールで管理したい場合があります。この特定の使用例を処理するために、**シナリオ**を使用して区別を管理できます。前の例で使用される2つの`HashMap`キーは、`Transfer:Owner`と`Transfer:Delegate`になります。

複数のシナリオ間で同一のルールを管理する方法については、[Namespace](/jp/token-auth-rules/primitive-rules/namespace)をご覧ください。

## ペイロード
Token Auth Rulesプログラムは、ルールセットからの評価を要求するプログラムから受信されるペイロードデータに依存します。`Payload`の基礎データ構造は`HashMap`であり、`Payload`フィールドは`HashMap`キーとして表現されます。ほとんどのルールは、検証時にルックアップが実行できるように事前定義された`Payload`フィールドを格納します。

`Payload`の使用方法の詳細については、[Validate](/jp/token-auth-rules/validate)命令をご覧ください。

## リソース

- [Token Auth Rule GitHubリポジトリ](https://github.com/metaplex-foundation/mpl-token-auth-rules)
- [JSクライアントのTypeScriptリファレンス](https://mpl-token-auth-rules.typedoc.metaplex.com/)