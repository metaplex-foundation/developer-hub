/**
 * Example: Update Fungible Token Metadata
 *
 * Update the metadata of a fungible token
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js/.ts and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import {\n  getUpdateV1InstructionAsync,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata-kit';",
  "setup": "// Assuming rpc, rpcSubscriptions, sendAndConfirm, and authority are set up\n// See getting-started for full setup\n\nconst mintAddress = 'YOUR_TOKEN_MINT_ADDRESS'; // Your fungible token mint",
  "main": "// Update the fungible token metadata\nconst updateIx = await getUpdateV1InstructionAsync({\n  mint: mintAddress,\n  authority,\n  payer: authority,\n  // Specify fields to update (creators must be explicitly set, use null to keep existing)\n  data: {\n    name: 'Updated Token Name',\n    symbol: 'UTN',\n    uri: 'https://example.com/updated-metadata.json',\n    sellerFeeBasisPoints: 0,\n    creators: null, // Keep existing creators\n  },\n});\n\nawait sendAndConfirm({\n  instructions: [updateIx],\n  payer: authority,\n});",
  "output": "console.log('Token metadata updated successfully');\nconsole.log('Mint:', mintAddress);\nconsole.log('New name:', 'Updated Token Name');",
  "full": "// [IMPORTS]\nimport {\n  getUpdateV1InstructionAsync,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata-kit';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming rpc, rpcSubscriptions, sendAndConfirm, and authority are set up\n// See getting-started for full setup\n\nconst mintAddress = 'YOUR_TOKEN_MINT_ADDRESS'; // Your fungible token mint\n// [/SETUP]\n\n// [MAIN]\n// Update the fungible token metadata\nconst updateIx = await getUpdateV1InstructionAsync({\n  mint: mintAddress,\n  authority,\n  payer: authority,\n  // Specify fields to update (creators must be explicitly set, use null to keep existing)\n  data: {\n    name: 'Updated Token Name',\n    symbol: 'UTN',\n    uri: 'https://example.com/updated-metadata.json',\n    sellerFeeBasisPoints: 0,\n    creators: null, // Keep existing creators\n  },\n});\n\nawait sendAndConfirm({\n  instructions: [updateIx],\n  payer: authority,\n});\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Token metadata updated successfully');\nconsole.log('Mint:', mintAddress);\nconsole.log('New name:', 'Updated Token Name');\n// [/OUTPUT]\n"
}

const umiSections = {
  "imports": "// npm install @metaplex-foundation/mpl-token-metadata @metaplex-foundation/umi @metaplex-foundation/umi-bundle-defaults\r\nimport {\r\n  fetchDigitalAsset,\r\n  mplTokenMetadata,\r\n  updateV1,\r\n} from '@metaplex-foundation/mpl-token-metadata'\r\nimport {\r\n  keypairIdentity,\r\n  publicKey,\r\n} from '@metaplex-foundation/umi'\r\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults'\r\nimport { readFileSync } from 'fs'",
  "setup": "// Initialize Umi with your RPC endpoint\r\nconst umi = createUmi('https://api.devnet.solana.com').use(mplTokenMetadata())\r\n\r\n// Load your wallet keypair (must be the update authority)\r\nconst wallet = '<your wallet file path>'\r\nconst secretKey = JSON.parse(readFileSync(wallet, 'utf-8'))\r\nconst keypair = umi.eddsa.createKeypairFromSecretKey(new Uint8Array(secretKey))\r\numi.use(keypairIdentity(keypair))\r\n\r\n// Your token mint address\r\nconst mintAddress = publicKey('<your token mint address>')",
  "main": "// Fetch existing token data\r\nconst asset = await fetchDigitalAsset(umi, mintAddress)\r\n\r\n// Update the token metadata (name, symbol, and URI)\r\nawait updateV1(umi, {\r\n  mint: mintAddress,\r\n  authority: umi.identity,\r\n  data: {\r\n    ...asset.metadata,\r\n    name: 'Updated Token Name',\r\n    symbol: 'UTN',\r\n    uri: 'https://example.com/updated-metadata.json',\r\n  },\r\n}).sendAndConfirm(umi)",
  "output": "console.log('Token metadata updated successfully')\r\nconsole.log('Mint:', mintAddress)\r\nconsole.log('New name:', 'Updated Token Name')\r\nconsole.log('New URI:', 'https://example.com/updated-metadata.json')",
  "full": "// [IMPORTS]\r\n// npm install @metaplex-foundation/mpl-token-metadata @metaplex-foundation/umi @metaplex-foundation/umi-bundle-defaults\r\nimport {\r\n  fetchDigitalAsset,\r\n  mplTokenMetadata,\r\n  updateV1,\r\n} from '@metaplex-foundation/mpl-token-metadata'\r\nimport {\r\n  keypairIdentity,\r\n  publicKey,\r\n} from '@metaplex-foundation/umi'\r\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults'\r\nimport { readFileSync } from 'fs'\r\n// [/IMPORTS]\r\n\r\n// [SETUP]\r\n// Initialize Umi with your RPC endpoint\r\nconst umi = createUmi('https://api.devnet.solana.com').use(mplTokenMetadata())\r\n\r\n// Load your wallet keypair (must be the update authority)\r\nconst wallet = '<your wallet file path>'\r\nconst secretKey = JSON.parse(readFileSync(wallet, 'utf-8'))\r\nconst keypair = umi.eddsa.createKeypairFromSecretKey(new Uint8Array(secretKey))\r\numi.use(keypairIdentity(keypair))\r\n\r\n// Your token mint address\r\nconst mintAddress = publicKey('<your token mint address>')\r\n// [/SETUP]\r\n\r\n// [MAIN]\r\n// Fetch existing token data\r\nconst asset = await fetchDigitalAsset(umi, mintAddress)\r\n\r\n// Update the token metadata (name, symbol, and URI)\r\nawait updateV1(umi, {\r\n  mint: mintAddress,\r\n  authority: umi.identity,\r\n  data: {\r\n    ...asset.metadata,\r\n    name: 'Updated Token Name',\r\n    symbol: 'UTN',\r\n    uri: 'https://example.com/updated-metadata.json',\r\n  },\r\n}).sendAndConfirm(umi)\r\n// [/MAIN]\r\n\r\n// [OUTPUT]\r\nconsole.log('Token metadata updated successfully')\r\nconsole.log('Mint:', mintAddress)\r\nconsole.log('New name:', 'Updated Token Name')\r\nconsole.log('New URI:', 'https://example.com/updated-metadata.json')\r\n// [/OUTPUT]\r\n"
}

const cliSections = {
  "imports": "",
  "setup": "",
  "main": "",
  "output": "",
  "full": "# Update Token Metadata using the Metaplex CLI\r\n\r\n# Interactive editor mode (opens metadata JSON in your default editor)\r\nmplx toolbox token update <MINT_ADDRESS> --editor\r\n\r\n# Update specific fields via flags\r\nmplx toolbox token update <MINT_ADDRESS> --name \"New Token Name\"\r\nmplx toolbox token update <MINT_ADDRESS> --symbol \"NEW\"\r\nmplx toolbox token update <MINT_ADDRESS> --description \"Updated description\"\r\n\r\n# Update with new image\r\nmplx toolbox token update <MINT_ADDRESS> --image ./new-image.png\r\n\r\n# Update multiple fields at once\r\nmplx toolbox token update <MINT_ADDRESS> \\\r\n  --name \"Updated Token\" \\\r\n  --symbol \"UPD\" \\\r\n  --description \"An updated token description\" \\\r\n  --image ./updated-image.png\r\n\r\n# Note: You must be the update authority to update token metadata\r\n# Note: --editor flag cannot be combined with other update flags\r\n"
}

export const metadata = {
  title: "Update Fungible Token Metadata",
  description: "Update the metadata of a fungible token",
  tags: ['token-metadata', 'fungible', 'spl-token', 'update', 'beginner'],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

  cli: {
    framework: 'CLI',
    language: 'bash',
    code: cliSections.full,
    sections: cliSections,
  },

}
