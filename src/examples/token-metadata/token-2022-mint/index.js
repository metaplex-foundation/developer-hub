/**
 * Example: token-2022-mint
 *
 * 
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js/.ts and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import {\n  getMintV1InstructionAsync,\n  findMetadataPda,\n  findAssociatedTokenPda,\n  TokenStandard,\n  SPL_TOKEN_2022_PROGRAM_ADDRESS,\n} from '@metaplex-foundation/mpl-token-metadata-kit';",
  "setup": "// Assuming rpc, rpcSubscriptions, sendAndConfirm, authority, and mint are set up\n// mint is the NFT created with Token-2022\n\nconst mintAddress = mint.address;",
  "main": "// Derive the associated token account for Token-2022\nconst [tokenAddress] = await findAssociatedTokenPda({\n  mint: mintAddress,\n  owner: authority.address,\n  tokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Mint the token using Token-2022\nconst [metadataAddress] = await findMetadataPda({ mint: mintAddress });\n\nconst mintIx = await getMintV1InstructionAsync({\n  mint: mintAddress,\n  token: tokenAddress,\n  authority,\n  payer: authority,\n  metadata: metadataAddress,\n  amount: 1,\n  tokenOwner: authority.address,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n  tokenStandard: TokenStandard.NonFungible,\n});\n\nawait sendAndConfirm({\n  instructions: [mintIx],\n  payer: authority,\n});",
  "output": "console.log('Token minted with Token-2022:', tokenAddress);",
  "full": "// [IMPORTS]\nimport {\n  getMintV1InstructionAsync,\n  findMetadataPda,\n  findAssociatedTokenPda,\n  TokenStandard,\n  SPL_TOKEN_2022_PROGRAM_ADDRESS,\n} from '@metaplex-foundation/mpl-token-metadata-kit';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming rpc, rpcSubscriptions, sendAndConfirm, authority, and mint are set up\n// mint is the NFT created with Token-2022\n\nconst mintAddress = mint.address;\n// [/SETUP]\n\n// [MAIN]\n// Derive the associated token account for Token-2022\nconst [tokenAddress] = await findAssociatedTokenPda({\n  mint: mintAddress,\n  owner: authority.address,\n  tokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Mint the token using Token-2022\nconst [metadataAddress] = await findMetadataPda({ mint: mintAddress });\n\nconst mintIx = await getMintV1InstructionAsync({\n  mint: mintAddress,\n  token: tokenAddress,\n  authority,\n  payer: authority,\n  metadata: metadataAddress,\n  amount: 1,\n  tokenOwner: authority.address,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n  tokenStandard: TokenStandard.NonFungible,\n});\n\nawait sendAndConfirm({\n  instructions: [mintIx],\n  payer: authority,\n});\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Token minted with Token-2022:', tokenAddress);\n// [/OUTPUT]\n"
}

const umiSections = {
  "imports": "import { publicKey } from '@metaplex-foundation/umi';\nimport { mintV1, TokenStandard } from '@metaplex-foundation/mpl-token-metadata';\nimport { findAssociatedTokenPda } from '@metaplex-foundation/mpl-toolbox';",
  "setup": "// Assuming umi is set up and mint was created with Token-2022\n\nconst SPL_TOKEN_2022_PROGRAM_ID = publicKey(\n  'TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb'\n);",
  "main": "// Derive the associated token account for Token-2022\nconst token = findAssociatedTokenPda(umi, {\n  mint: mint.publicKey,\n  owner: umi.identity.publicKey,\n  tokenProgramId: SPL_TOKEN_2022_PROGRAM_ID,\n});\n\n// Mint the token using Token-2022\nawait mintV1(umi, {\n  mint: mint.publicKey,\n  token,\n  authority,\n  amount: 1,\n  tokenOwner: umi.identity.publicKey,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n  tokenStandard: TokenStandard.NonFungible,\n}).sendAndConfirm(umi);",
  "output": "console.log('Token minted with Token-2022');",
  "full": "// [IMPORTS]\nimport { publicKey } from '@metaplex-foundation/umi';\nimport { mintV1, TokenStandard } from '@metaplex-foundation/mpl-token-metadata';\nimport { findAssociatedTokenPda } from '@metaplex-foundation/mpl-toolbox';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming umi is set up and mint was created with Token-2022\n\nconst SPL_TOKEN_2022_PROGRAM_ID = publicKey(\n  'TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb'\n);\n// [/SETUP]\n\n// [MAIN]\n// Derive the associated token account for Token-2022\nconst token = findAssociatedTokenPda(umi, {\n  mint: mint.publicKey,\n  owner: umi.identity.publicKey,\n  tokenProgramId: SPL_TOKEN_2022_PROGRAM_ID,\n});\n\n// Mint the token using Token-2022\nawait mintV1(umi, {\n  mint: mint.publicKey,\n  token,\n  authority,\n  amount: 1,\n  tokenOwner: umi.identity.publicKey,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n  tokenStandard: TokenStandard.NonFungible,\n}).sendAndConfirm(umi);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Token minted with Token-2022');\n// [/OUTPUT]\n"
}

const shankSections = {
  "imports": "use mpl_token_metadata::instructions::MintV1Builder;\nuse solana_rpc_client::rpc_client::RpcClient;\nuse solana_sdk::{\n     message::Message,\n     transaction::Transaction,\n};",
  "setup": "",
  "main": "// 1. client is a reference to the initialized RpcClient\n// 2. every account is specified by their pubkey\n\nlet client = ...;\n\nlet mint_ix = MintV1Builder::new()\n    .token(token)\n    .token_owner(Some(token_owner))\n    .metadata(metadata)\n    .master_edition(Some(master_edition))\n    .mint(mint)\n    .authority(update_authority)\n    .payer(payer)\n    .spl_token_program(spl_token_2022::id())\n    .amount(1)\n    .instruction();\n\nlet message = Message::new(\n    &[mint_ix],\n    Some(&payer.pubkey()),\n);\n\nlet blockhash = client.get_latest_blockhash()?;\nlet mut tx = Transaction::new(&[update_authority, payer], message, blockhash);\nclient.send_and_confirm_transaction(&tx)?;",
  "output": "",
  "full": "// [IMPORTS]\nuse mpl_token_metadata::instructions::MintV1Builder;\nuse solana_rpc_client::rpc_client::RpcClient;\nuse solana_sdk::{\n     message::Message,\n     transaction::Transaction,\n};\n// [/IMPORTS]\n\n// [MAIN]\n// 1. client is a reference to the initialized RpcClient\n// 2. every account is specified by their pubkey\n\nlet client = ...;\n\nlet mint_ix = MintV1Builder::new()\n    .token(token)\n    .token_owner(Some(token_owner))\n    .metadata(metadata)\n    .master_edition(Some(master_edition))\n    .mint(mint)\n    .authority(update_authority)\n    .payer(payer)\n    .spl_token_program(spl_token_2022::id())\n    .amount(1)\n    .instruction();\n\nlet message = Message::new(\n    &[mint_ix],\n    Some(&payer.pubkey()),\n);\n\nlet blockhash = client.get_latest_blockhash()?;\nlet mut tx = Transaction::new(&[update_authority, payer], message, blockhash);\nclient.send_and_confirm_transaction(&tx)?;\n// [/MAIN]\n"
}

export const metadata = {
  title: "token-2022-mint",
  description: "",
  tags: [],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

  shank: {
    framework: 'Shank',
    language: 'rust',
    code: shankSections.full,
    sections: shankSections,
  },

}
