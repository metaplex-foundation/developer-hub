/**
 * Example: getting-started
 *
 * 
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import {\n  appendTransactionMessageInstructions,\n  assertIsTransactionWithinSizeLimit,\n  compileTransaction,\n  createSolanaRpc,\n  createSolanaRpcSubscriptions,\n  createTransactionMessage,\n  generateKeyPairSigner,\n  getSignatureFromTransaction,\n  type Instruction,\n  type KeyPairSigner,\n  pipe,\n  sendAndConfirmTransactionFactory,\n  setTransactionMessageFeePayer,\n  setTransactionMessageLifetimeUsingBlockhash,\n  signTransaction,\n} from '@solana/kit';\nimport {\n  createNft,\n  fetchDigitalAsset,\n} from '@metaplex-foundation/mpl-token-metadata-kit';",
  "setup": "// Create RPC connection\nconst rpc = createSolanaRpc('https://api.devnet.solana.com');\nconst rpcSubscriptions = createSolanaRpcSubscriptions('wss://api.devnet.solana.com');\n\n// Generate keypairs (or load from wallet)\nconst authority = await generateKeyPairSigner();\nconst mint = await generateKeyPairSigner();\n\n// Helper function to send and confirm transactions\nasync function sendAndConfirm(instructions: Instruction[], signers: KeyPairSigner[]) {\n  const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();\n  if (signers.length === 0) {\n    throw new Error('At least one signer is required for fee payer.');\n  }\n\n  const transaction = pipe(\n    createTransactionMessage({ version: 0 }),\n    (tx) => setTransactionMessageFeePayer(signers[0].address, tx),\n    (tx) => setTransactionMessageLifetimeUsingBlockhash(latestBlockhash, tx),\n    (tx) => appendTransactionMessageInstructions(instructions, tx),\n    (tx) => compileTransaction(tx),\n  );\n\n  const keyPairs = signers.map((s) => s.keyPair);\n  const signedTransaction = await signTransaction(keyPairs, transaction);\n\n  const sendAndConfirmTx = sendAndConfirmTransactionFactory({ rpc, rpcSubscriptions });\n  assertIsTransactionWithinSizeLimit(signedTransaction);\n  await sendAndConfirmTx(signedTransaction, { commitment: 'confirmed' });\n  return getSignatureFromTransaction(signedTransaction);\n}",
  "main": "// Create and mint an NFT using the helper function\nconst [createIx, mintIx] = await createNft({\n  mint,\n  authority,\n  payer: authority,\n  name: 'My NFT',\n  uri: 'https://example.com/my-nft.json',\n  sellerFeeBasisPoints: 550, // 5.5%\n  tokenOwner: authority.address,\n});\n\n// Send transaction\nconst sx = await sendAndConfirm([createIx, mintIx], [mint, authority]);\n\n// Fetch the NFT data\nconst asset = await fetchDigitalAsset(rpc, mint.address);",
  "output": "console.log('NFT created successfully!');\nconsole.log('Mint address:', mint.address);\nconsole.log('Signature:', sx);\nconsole.log('Name:', asset.metadata.name);\nconsole.log('URI:', asset.metadata.uri);",
  "full": "// [IMPORTS]\nimport {\n  appendTransactionMessageInstructions,\n  assertIsTransactionWithinSizeLimit,\n  compileTransaction,\n  createSolanaRpc,\n  createSolanaRpcSubscriptions,\n  createTransactionMessage,\n  generateKeyPairSigner,\n  getSignatureFromTransaction,\n  type Instruction,\n  type KeyPairSigner,\n  pipe,\n  sendAndConfirmTransactionFactory,\n  setTransactionMessageFeePayer,\n  setTransactionMessageLifetimeUsingBlockhash,\n  signTransaction,\n} from '@solana/kit';\nimport {\n  createNft,\n  fetchDigitalAsset,\n} from '@metaplex-foundation/mpl-token-metadata-kit';\n// [/IMPORTS]\n\n// [SETUP]\n// Create RPC connection\nconst rpc = createSolanaRpc('https://api.devnet.solana.com');\nconst rpcSubscriptions = createSolanaRpcSubscriptions('wss://api.devnet.solana.com');\n\n// Generate keypairs (or load from wallet)\nconst authority = await generateKeyPairSigner();\nconst mint = await generateKeyPairSigner();\n\n// Helper function to send and confirm transactions\nasync function sendAndConfirm(instructions: Instruction[], signers: KeyPairSigner[]) {\n  const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();\n  if (signers.length === 0) {\n    throw new Error('At least one signer is required for fee payer.');\n  }\n\n  const transaction = pipe(\n    createTransactionMessage({ version: 0 }),\n    (tx) => setTransactionMessageFeePayer(signers[0].address, tx),\n    (tx) => setTransactionMessageLifetimeUsingBlockhash(latestBlockhash, tx),\n    (tx) => appendTransactionMessageInstructions(instructions, tx),\n    (tx) => compileTransaction(tx),\n  );\n\n  const keyPairs = signers.map((s) => s.keyPair);\n  const signedTransaction = await signTransaction(keyPairs, transaction);\n\n  const sendAndConfirmTx = sendAndConfirmTransactionFactory({ rpc, rpcSubscriptions });\n  assertIsTransactionWithinSizeLimit(signedTransaction);\n  await sendAndConfirmTx(signedTransaction, { commitment: 'confirmed' });\n  return getSignatureFromTransaction(signedTransaction);\n}\n// [/SETUP]\n\n// [MAIN]\n// Create and mint an NFT using the helper function\nconst [createIx, mintIx] = await createNft({\n  mint,\n  authority,\n  payer: authority,\n  name: 'My NFT',\n  uri: 'https://example.com/my-nft.json',\n  sellerFeeBasisPoints: 550, // 5.5%\n  tokenOwner: authority.address,\n});\n\n// Send transaction\nconst sx = await sendAndConfirm([createIx, mintIx], [mint, authority]);\n\n// Fetch the NFT data\nconst asset = await fetchDigitalAsset(rpc, mint.address);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('NFT created successfully!');\nconsole.log('Mint address:', mint.address);\nconsole.log('Signature:', sx);\nconsole.log('Name:', asset.metadata.name);\nconsole.log('URI:', asset.metadata.uri);\n// [/OUTPUT]\n"
}

const umiSections = {
  "imports": "import { createUmi } from '@metaplex-foundation/umi-bundle-defaults';\nimport { generateSigner, percentAmount } from '@metaplex-foundation/umi';\nimport {\n  mplTokenMetadata,\n  createNft,\n  fetchDigitalAsset,\n} from '@metaplex-foundation/mpl-token-metadata';",
  "setup": "// Create Umi instance with the Token Metadata plugin\nconst umi = createUmi('https://api.devnet.solana.com')\n  .use(mplTokenMetadata());\n\n// Connect your wallet (keypair or wallet adapter)\n// For keypair: umi.use(keypairIdentity(keypair))\n// For wallet adapter: umi.use(walletAdapterIdentity(wallet))",
  "main": "// Generate a new mint keypair\nconst mint = generateSigner(umi);\n\n// Create an NFT\nawait createNft(umi, {\n  mint,\n  name: 'My NFT',\n  uri: 'https://example.com/my-nft.json',\n  sellerFeeBasisPoints: percentAmount(5.5),\n}).sendAndConfirm(umi);\n\n// Fetch the NFT data\nconst asset = await fetchDigitalAsset(umi, mint.publicKey);",
  "output": "console.log('NFT created successfully!');\nconsole.log('Mint address:', mint.publicKey);\nconsole.log('Name:', asset.metadata.name);\nconsole.log('URI:', asset.metadata.uri);",
  "full": "// [IMPORTS]\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults';\nimport { generateSigner, percentAmount } from '@metaplex-foundation/umi';\nimport {\n  mplTokenMetadata,\n  createNft,\n  fetchDigitalAsset,\n} from '@metaplex-foundation/mpl-token-metadata';\n// [/IMPORTS]\n\n// [SETUP]\n// Create Umi instance with the Token Metadata plugin\nconst umi = createUmi('https://api.devnet.solana.com')\n  .use(mplTokenMetadata());\n\n// Connect your wallet (keypair or wallet adapter)\n// For keypair: umi.use(keypairIdentity(keypair))\n// For wallet adapter: umi.use(walletAdapterIdentity(wallet))\n// [/SETUP]\n\n// [MAIN]\n// Generate a new mint keypair\nconst mint = generateSigner(umi);\n\n// Create an NFT\nawait createNft(umi, {\n  mint,\n  name: 'My NFT',\n  uri: 'https://example.com/my-nft.json',\n  sellerFeeBasisPoints: percentAmount(5.5),\n}).sendAndConfirm(umi);\n\n// Fetch the NFT data\nconst asset = await fetchDigitalAsset(umi, mint.publicKey);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('NFT created successfully!');\nconsole.log('Mint address:', mint.publicKey);\nconsole.log('Name:', asset.metadata.name);\nconsole.log('URI:', asset.metadata.uri);\n// [/OUTPUT]\n"
}

export const metadata = {
  title: "getting-started",
  description: "",
  tags: [],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

}
