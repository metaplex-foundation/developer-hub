/**
 * Example: soulbound
 *
 * 
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import { generateKeyPairSigner } from '@solana/signers';\nimport {\n  ExtensionType,\n  createInitializeMintInstruction,\n  getMintLen,\n  createInitializeNonTransferableMintInstruction,\n  TOKEN_2022_PROGRAM_ID,\n} from '@solana/spl-token';\nimport { SystemProgram, PublicKey } from '@solana/web3.js';\nimport {\n  getCreateV1InstructionAsync,\n  getMintV1InstructionAsync,\n  findAssociatedTokenPda,\n  TokenStandard,\n  SPL_TOKEN_2022_PROGRAM_ADDRESS,\n} from '@metaplex-foundation/mpl-token-metadata-kit';",
  "setup": "// Assuming rpc, rpcSubscriptions, and sendAndConfirm are set up\n\nconst authority = await generateKeyPairSigner();\nconst mint = await generateKeyPairSigner();",
  "main": "// Calculate space needed for Token22 mint with NonTransferable extension\nconst extensions = [ExtensionType.NonTransferable];\nconst space = getMintLen(extensions);\nconst { value: lamports } = await rpc.getMinimumBalanceForRentExemption(BigInt(space)).send();\n\n// Create the mint account with Token22 program\nconst createAccountIx = SystemProgram.createAccount({\n  fromPubkey: new PublicKey(authority.address),\n  newAccountPubkey: new PublicKey(mint.address),\n  lamports: Number(lamports),\n  space,\n  programId: TOKEN_2022_PROGRAM_ID,\n});\n\n// Initialize the non-transferable extension (must be before mint init)\nconst initNonTransferableIx = createInitializeNonTransferableMintInstruction(\n  new PublicKey(mint.address),\n  TOKEN_2022_PROGRAM_ID\n);\n\n// Initialize the mint\nconst initMintIx = createInitializeMintInstruction(\n  new PublicKey(mint.address),\n  0, // decimals\n  new PublicKey(authority.address), // mint authority\n  new PublicKey(authority.address), // freeze authority\n  TOKEN_2022_PROGRAM_ID\n);\n\n// Send the Token22 setup transaction first\n// (Convert web3.js instructions to your transaction format)\n\n// Create the Token Metadata\nconst createMetadataIx = await getCreateV1InstructionAsync({\n  mint,\n  authority,\n  payer: authority,\n  name: 'My Soulbound NFT',\n  uri: 'https://example.com/my-soulbound-nft.json',\n  sellerFeeBasisPoints: 550,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Derive the token PDA for Token22\nconst [token] = await findAssociatedTokenPda({\n  mint: mint.address,\n  owner: authority.address,\n  tokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Mint the token\nconst mintTokenIx = await getMintV1InstructionAsync({\n  mint: mint.address,\n  authority,\n  payer: authority,\n  token,\n  tokenOwner: authority.address,\n  amount: 1,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n});\n\n// Send metadata and mint instructions\nawait sendAndConfirm([createMetadataIx, mintTokenIx], [mint, authority]);",
  "output": "console.log('Soulbound NFT created:', mint.address);",
  "full": "// [IMPORTS]\nimport { generateKeyPairSigner } from '@solana/signers';\nimport {\n  ExtensionType,\n  createInitializeMintInstruction,\n  getMintLen,\n  createInitializeNonTransferableMintInstruction,\n  TOKEN_2022_PROGRAM_ID,\n} from '@solana/spl-token';\nimport { SystemProgram, PublicKey } from '@solana/web3.js';\nimport {\n  getCreateV1InstructionAsync,\n  getMintV1InstructionAsync,\n  findAssociatedTokenPda,\n  TokenStandard,\n  SPL_TOKEN_2022_PROGRAM_ADDRESS,\n} from '@metaplex-foundation/mpl-token-metadata-kit';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming rpc, rpcSubscriptions, and sendAndConfirm are set up\n\nconst authority = await generateKeyPairSigner();\nconst mint = await generateKeyPairSigner();\n// [/SETUP]\n\n// [MAIN]\n// Calculate space needed for Token22 mint with NonTransferable extension\nconst extensions = [ExtensionType.NonTransferable];\nconst space = getMintLen(extensions);\nconst { value: lamports } = await rpc.getMinimumBalanceForRentExemption(BigInt(space)).send();\n\n// Create the mint account with Token22 program\nconst createAccountIx = SystemProgram.createAccount({\n  fromPubkey: new PublicKey(authority.address),\n  newAccountPubkey: new PublicKey(mint.address),\n  lamports: Number(lamports),\n  space,\n  programId: TOKEN_2022_PROGRAM_ID,\n});\n\n// Initialize the non-transferable extension (must be before mint init)\nconst initNonTransferableIx = createInitializeNonTransferableMintInstruction(\n  new PublicKey(mint.address),\n  TOKEN_2022_PROGRAM_ID\n);\n\n// Initialize the mint\nconst initMintIx = createInitializeMintInstruction(\n  new PublicKey(mint.address),\n  0, // decimals\n  new PublicKey(authority.address), // mint authority\n  new PublicKey(authority.address), // freeze authority\n  TOKEN_2022_PROGRAM_ID\n);\n\n// Send the Token22 setup transaction first\n// (Convert web3.js instructions to your transaction format)\n\n// Create the Token Metadata\nconst createMetadataIx = await getCreateV1InstructionAsync({\n  mint,\n  authority,\n  payer: authority,\n  name: 'My Soulbound NFT',\n  uri: 'https://example.com/my-soulbound-nft.json',\n  sellerFeeBasisPoints: 550,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Derive the token PDA for Token22\nconst [token] = await findAssociatedTokenPda({\n  mint: mint.address,\n  owner: authority.address,\n  tokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n});\n\n// Mint the token\nconst mintTokenIx = await getMintV1InstructionAsync({\n  mint: mint.address,\n  authority,\n  payer: authority,\n  token,\n  tokenOwner: authority.address,\n  amount: 1,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ADDRESS,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n});\n\n// Send metadata and mint instructions\nawait sendAndConfirm([createMetadataIx, mintTokenIx], [mint, authority]);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Soulbound NFT created:', mint.address);\n// [/OUTPUT]\n"
}

const umiSections = {
  "imports": "import { createV1, mintV1 } from \"@metaplex-foundation/mpl-token-metadata\";\nimport { createAccount, findAssociatedTokenPda } from '@metaplex-foundation/mpl-toolbox';\nimport {\n  ExtensionType,\n  createInitializeMintInstruction,\n  getMintLen,\n  createInitializeNonTransferableMintInstruction,\n} from '@solana/spl-token';\nimport {\n  fromWeb3JsInstruction,\n  toWeb3JsPublicKey,\n} from '@metaplex-foundation/umi-web3js-adapters';\nimport {\n  generateSigner,\n  publicKey,\n  percentAmount,\n} from '@metaplex-foundation/umi';",
  "setup": "const SPL_TOKEN_2022_PROGRAM_ID = publicKey(\n  'TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb'\n);\n\n// Assuming umi is set up\nconst mint = generateSigner(umi);",
  "main": "const extensions = [ExtensionType.NonTransferable];\nconst space = getMintLen(extensions);\nconst lamports = await umi.rpc.getRent(space);\n\n// Create the mint account.\nconst createAccountIx = createAccount(umi, {\n  payer: umi.identity,\n  newAccount: mint,\n  lamports,\n  space,\n  programId: SPL_TOKEN_2022_PROGRAM_ID,\n}).getInstructions();\n\n// Initialize the non-transferable extension.\nconst createInitNonTransferableMintIx =\n  createInitializeNonTransferableMintInstruction(\n    toWeb3JsPublicKey(mint.publicKey),\n    toWeb3JsPublicKey(SPL_TOKEN_2022_PROGRAM_ID)\n  );\n\n// Initialize the mint.\nconst createInitMintIx = createInitializeMintInstruction(\n  toWeb3JsPublicKey(mint.publicKey),\n  0,\n  toWeb3JsPublicKey(umi.identity.publicKey),\n  toWeb3JsPublicKey(umi.identity.publicKey),\n  toWeb3JsPublicKey(SPL_TOKEN_2022_PROGRAM_ID)\n);\n\n// Create the transaction with the Token22 instructions.\nconst blockhash = await umi.rpc.getLatestBlockhash();\nconst tx = umi.transactions.create({\n  version: 0,\n  instructions: [\n    ...createAccountIx,\n    fromWeb3JsInstruction(createInitNonTransferableMintIx),\n    fromWeb3JsInstruction(createInitMintIx),\n  ],\n  payer: umi.identity.publicKey,\n  blockhash: blockhash.blockhash,\n});\n\n// Sign, send, and confirm the transaction.\nlet signedTx = await mint.signTransaction(tx);\nsignedTx = await umi.identity.signTransaction(signedTx);\nconst signature = await umi.rpc.sendTransaction(signedTx);\nawait umi.rpc.confirmTransaction(signature, {\n  strategy: { type: 'blockhash', ...blockhash },\n  commitment: 'confirmed',\n});\n\n// Create the Token Metadata accounts.\nawait createV1(umi, {\n  mint,\n  name: 'My Soulbound NFT',\n  uri: 'https://example.com/my-soulbound-nft.json',\n  sellerFeeBasisPoints: percentAmount(5.5),\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n}).sendAndConfirm(umi);\n\n// Derive the token PDA.\nconst token = findAssociatedTokenPda(umi, {\n  mint: mint.publicKey,\n  owner: umi.identity.publicKey,\n  tokenProgramId: SPL_TOKEN_2022_PROGRAM_ID,\n});\n\n// Mint the token.\nawait mintV1(umi, {\n  mint: mint.publicKey,\n  token,\n  tokenOwner: umi.identity.publicKey,\n  amount: 1,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n}).sendAndConfirm(umi);",
  "output": "console.log('Soulbound NFT created:', mint.publicKey);",
  "full": "// [IMPORTS]\nimport { createV1, mintV1 } from \"@metaplex-foundation/mpl-token-metadata\";\nimport { createAccount, findAssociatedTokenPda } from '@metaplex-foundation/mpl-toolbox';\nimport {\n  ExtensionType,\n  createInitializeMintInstruction,\n  getMintLen,\n  createInitializeNonTransferableMintInstruction,\n} from '@solana/spl-token';\nimport {\n  fromWeb3JsInstruction,\n  toWeb3JsPublicKey,\n} from '@metaplex-foundation/umi-web3js-adapters';\nimport {\n  generateSigner,\n  publicKey,\n  percentAmount,\n} from '@metaplex-foundation/umi';\n// [/IMPORTS]\n\n// [SETUP]\nconst SPL_TOKEN_2022_PROGRAM_ID = publicKey(\n  'TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb'\n);\n\n// Assuming umi is set up\nconst mint = generateSigner(umi);\n// [/SETUP]\n\n// [MAIN]\nconst extensions = [ExtensionType.NonTransferable];\nconst space = getMintLen(extensions);\nconst lamports = await umi.rpc.getRent(space);\n\n// Create the mint account.\nconst createAccountIx = createAccount(umi, {\n  payer: umi.identity,\n  newAccount: mint,\n  lamports,\n  space,\n  programId: SPL_TOKEN_2022_PROGRAM_ID,\n}).getInstructions();\n\n// Initialize the non-transferable extension.\nconst createInitNonTransferableMintIx =\n  createInitializeNonTransferableMintInstruction(\n    toWeb3JsPublicKey(mint.publicKey),\n    toWeb3JsPublicKey(SPL_TOKEN_2022_PROGRAM_ID)\n  );\n\n// Initialize the mint.\nconst createInitMintIx = createInitializeMintInstruction(\n  toWeb3JsPublicKey(mint.publicKey),\n  0,\n  toWeb3JsPublicKey(umi.identity.publicKey),\n  toWeb3JsPublicKey(umi.identity.publicKey),\n  toWeb3JsPublicKey(SPL_TOKEN_2022_PROGRAM_ID)\n);\n\n// Create the transaction with the Token22 instructions.\nconst blockhash = await umi.rpc.getLatestBlockhash();\nconst tx = umi.transactions.create({\n  version: 0,\n  instructions: [\n    ...createAccountIx,\n    fromWeb3JsInstruction(createInitNonTransferableMintIx),\n    fromWeb3JsInstruction(createInitMintIx),\n  ],\n  payer: umi.identity.publicKey,\n  blockhash: blockhash.blockhash,\n});\n\n// Sign, send, and confirm the transaction.\nlet signedTx = await mint.signTransaction(tx);\nsignedTx = await umi.identity.signTransaction(signedTx);\nconst signature = await umi.rpc.sendTransaction(signedTx);\nawait umi.rpc.confirmTransaction(signature, {\n  strategy: { type: 'blockhash', ...blockhash },\n  commitment: 'confirmed',\n});\n\n// Create the Token Metadata accounts.\nawait createV1(umi, {\n  mint,\n  name: 'My Soulbound NFT',\n  uri: 'https://example.com/my-soulbound-nft.json',\n  sellerFeeBasisPoints: percentAmount(5.5),\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n}).sendAndConfirm(umi);\n\n// Derive the token PDA.\nconst token = findAssociatedTokenPda(umi, {\n  mint: mint.publicKey,\n  owner: umi.identity.publicKey,\n  tokenProgramId: SPL_TOKEN_2022_PROGRAM_ID,\n});\n\n// Mint the token.\nawait mintV1(umi, {\n  mint: mint.publicKey,\n  token,\n  tokenOwner: umi.identity.publicKey,\n  amount: 1,\n  splTokenProgram: SPL_TOKEN_2022_PROGRAM_ID,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n}).sendAndConfirm(umi);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Soulbound NFT created:', mint.publicKey);\n// [/OUTPUT]\n"
}

export const metadata = {
  title: "soulbound",
  description: "",
  tags: [],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

}
