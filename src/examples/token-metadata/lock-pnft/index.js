/**
 * Example: lock-pnft
 *
 * 
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js/.ts and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import {\n  getLockV1InstructionAsync,\n  fetchDigitalAssetWithAssociatedToken,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata-kit';",
  "setup": "// Assuming rpc, rpcSubscriptions, sendAndConfirm, and authority (delegate) are set up\n\nconst mintAddress = 'mintAddress...'; // The pNFT mint address",
  "main": "// Fetch pNFT Asset with Token Accounts\nconst assetWithToken = await fetchDigitalAssetWithAssociatedToken(\n  rpc,\n  mintAddress,\n  authority.address\n);\n\n// Lock a pNFT - requires approved delegate authority\nconst lockIx = await getLockV1InstructionAsync({\n  mint: mintAddress,\n  authority,\n  payer: authority,\n  tokenOwner: assetWithToken.token.owner,\n  token: assetWithToken.token.address,\n  tokenRecord: assetWithToken.tokenRecord?.address,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n});\n\nawait sendAndConfirm({\n  instructions: [lockIx],\n  payer: authority,\n});",
  "output": "console.log('pNFT locked');",
  "full": "// [IMPORTS]\nimport {\n  getLockV1InstructionAsync,\n  fetchDigitalAssetWithAssociatedToken,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata-kit';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming rpc, rpcSubscriptions, sendAndConfirm, and authority (delegate) are set up\n\nconst mintAddress = 'mintAddress...'; // The pNFT mint address\n// [/SETUP]\n\n// [MAIN]\n// Fetch pNFT Asset with Token Accounts\nconst assetWithToken = await fetchDigitalAssetWithAssociatedToken(\n  rpc,\n  mintAddress,\n  authority.address\n);\n\n// Lock a pNFT - requires approved delegate authority\nconst lockIx = await getLockV1InstructionAsync({\n  mint: mintAddress,\n  authority,\n  payer: authority,\n  tokenOwner: assetWithToken.token.owner,\n  token: assetWithToken.token.address,\n  tokenRecord: assetWithToken.tokenRecord?.address,\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n});\n\nawait sendAndConfirm({\n  instructions: [lockIx],\n  payer: authority,\n});\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('pNFT locked');\n// [/OUTPUT]\n"
}

const umiSections = {
  "imports": "import {\n  fetchDigitalAssetWithAssociatedToken,\n  lockV1,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata';\nimport { publicKey } from '@metaplex-foundation/umi';\nimport { base58 } from '@metaplex-foundation/umi/serializers';",
  "setup": "// Assuming umi is set up with mplTokenMetadata plugin\n\n// Mint ID of the pNFT Asset\nconst mintId = publicKey('11111111111111111111111111111111');",
  "main": "// Fetch pNFT Asset with Token Accounts\nconst assetWithToken = await fetchDigitalAssetWithAssociatedToken(\n  umi,\n  mintId,\n  umi.identity.publicKey\n);\n\n// Send lock instruction\nconst { signature } = await lockV1(umi, {\n  // Mint ID of the pNFT Asset\n  mint: mintId,\n  // Update Authority or Delegate Authority\n  authority: umi.identity,\n  // Token Standard\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  // Owner of the pNFT Asset\n  tokenOwner: assetWithToken.token.owner,\n  // Token Account of the pNFT Asset\n  token: assetWithToken.token.publicKey,\n  // Token Record of the pNFT Asset\n  tokenRecord: assetWithToken.tokenRecord?.publicKey,\n}).sendAndConfirm(umi);",
  "output": "console.log('Signature: ', base58.deserialize(signature));",
  "full": "// [IMPORTS]\nimport {\n  fetchDigitalAssetWithAssociatedToken,\n  lockV1,\n  TokenStandard,\n} from '@metaplex-foundation/mpl-token-metadata';\nimport { publicKey } from '@metaplex-foundation/umi';\nimport { base58 } from '@metaplex-foundation/umi/serializers';\n// [/IMPORTS]\n\n// [SETUP]\n// Assuming umi is set up with mplTokenMetadata plugin\n\n// Mint ID of the pNFT Asset\nconst mintId = publicKey('11111111111111111111111111111111');\n// [/SETUP]\n\n// [MAIN]\n// Fetch pNFT Asset with Token Accounts\nconst assetWithToken = await fetchDigitalAssetWithAssociatedToken(\n  umi,\n  mintId,\n  umi.identity.publicKey\n);\n\n// Send lock instruction\nconst { signature } = await lockV1(umi, {\n  // Mint ID of the pNFT Asset\n  mint: mintId,\n  // Update Authority or Delegate Authority\n  authority: umi.identity,\n  // Token Standard\n  tokenStandard: TokenStandard.ProgrammableNonFungible,\n  // Owner of the pNFT Asset\n  tokenOwner: assetWithToken.token.owner,\n  // Token Account of the pNFT Asset\n  token: assetWithToken.token.publicKey,\n  // Token Record of the pNFT Asset\n  tokenRecord: assetWithToken.tokenRecord?.publicKey,\n}).sendAndConfirm(umi);\n// [/MAIN]\n\n// [OUTPUT]\nconsole.log('Signature: ', base58.deserialize(signature));\n// [/OUTPUT]\n"
}

export const metadata = {
  title: "lock-pnft",
  description: "",
  tags: [],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

}
