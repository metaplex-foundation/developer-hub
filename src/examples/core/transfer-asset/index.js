/**
 * Example: Transfer an Asset
 *
 * Transfer ownership of an NFT asset to a new owner
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js and .rs files, then run: node scripts/build-examples.js
 */

const kitSections = {
  "imports": "import { transfer } from '@metaplex-kit/core'",
  "setup": "",
  "main": "// Transfer an existing NFT asset to a new owner\r\nconst signature = await transfer({\r\n  asset: assetAddress,\r\n  newOwner: recipientPublicKey,\r\n})",
  "output": "console.log('Asset transferred:', signature)",
  "full": "// [IMPORTS]\r\nimport { transfer } from '@metaplex-kit/core'\r\n// [/IMPORTS]\r\n\r\n// [MAIN]\r\n// Transfer an existing NFT asset to a new owner\r\nconst signature = await transfer({\r\n  asset: assetAddress,\r\n  newOwner: recipientPublicKey,\r\n})\r\n// [/MAIN]\r\n\r\n// [OUTPUT]\r\nconsole.log('Asset transferred:', signature)\r\n// [/OUTPUT]\r\n"
}

const umiSections = {
  "imports": "import { createUmi } from '@metaplex-foundation/umi-bundle-defaults'\r\nimport { transfer } from '@metaplex-foundation/mpl-core'\r\nimport { mplCore } from '@metaplex-foundation/mpl-core'\r\nimport { publicKey } from '@metaplex-foundation/umi'",
  "setup": "// Initialize UMI\r\nconst umi = createUmi('https://api.devnet.solana.com')\r\n  .use(mplCore())",
  "main": "// Transfer an existing NFT asset to a new owner\r\nconst result = await transfer(umi, {\r\n  asset: publicKey('AssetAddressHere...'),\r\n  newOwner: publicKey('RecipientAddressHere...'),\r\n}).sendAndConfirm(umi)",
  "output": "console.log('Asset transferred:', result.signature)",
  "full": "// [IMPORTS]\r\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults'\r\nimport { transfer } from '@metaplex-foundation/mpl-core'\r\nimport { mplCore } from '@metaplex-foundation/mpl-core'\r\nimport { publicKey } from '@metaplex-foundation/umi'\r\n// [/IMPORTS]\r\n\r\n// [SETUP]\r\n// Initialize UMI\r\nconst umi = createUmi('https://api.devnet.solana.com')\r\n  .use(mplCore())\r\n// [/SETUP]\r\n\r\n// [MAIN]\r\n// Transfer an existing NFT asset to a new owner\r\nconst result = await transfer(umi, {\r\n  asset: publicKey('AssetAddressHere...'),\r\n  newOwner: publicKey('RecipientAddressHere...'),\r\n}).sendAndConfirm(umi)\r\n// [/MAIN]\r\n\r\n// [OUTPUT]\r\nconsole.log('Asset transferred:', result.signature)\r\n// [/OUTPUT]\r\n"
}

const shankSections = {
  "imports": "use mpl_core::instructions::TransferV1;\r\nuse solana_sdk::{pubkey::Pubkey, signer::Signer};",
  "setup": "",
  "main": "// Asset and recipient addresses\r\nlet asset = Pubkey::from_str(\"AssetAddressHere...\").unwrap();\r\nlet new_owner = Pubkey::from_str(\"RecipientAddressHere...\").unwrap();\r\n\r\n// Transfer an existing NFT asset to a new owner\r\nlet transfer_ix = TransferV1 {\r\n    asset,\r\n    new_owner,\r\n    ..Default::default()\r\n};\r\n\r\nlet instruction = transfer_ix.instruction();",
  "output": "println!(\"Transfer instruction created\");",
  "full": "// [IMPORTS]\r\nuse mpl_core::instructions::TransferV1;\r\nuse solana_sdk::{pubkey::Pubkey, signer::Signer};\r\n// [/IMPORTS]\r\n\r\n// [MAIN]\r\n// Asset and recipient addresses\r\nlet asset = Pubkey::from_str(\"AssetAddressHere...\").unwrap();\r\nlet new_owner = Pubkey::from_str(\"RecipientAddressHere...\").unwrap();\r\n\r\n// Transfer an existing NFT asset to a new owner\r\nlet transfer_ix = TransferV1 {\r\n    asset,\r\n    new_owner,\r\n    ..Default::default()\r\n};\r\n\r\nlet instruction = transfer_ix.instruction();\r\n// [/MAIN]\r\n\r\n// [OUTPUT]\r\nprintln!(\"Transfer instruction created\");\r\n// [/OUTPUT]\r\n"
}

const anchorSections = {
  "imports": "use anchor_lang::prelude::*;",
  "setup": "",
  "main": "declare_id!(\"Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS\");\r\n\r\n#[program]\r\npub mod transfer_asset {\r\n    use super::*;\r\n\r\n    // Transfer an existing NFT asset to a new owner\r\n    pub fn transfer(\r\n        ctx: Context<TransferAsset>\r\n    ) -> Result<()> {\r\n        let asset = &mut ctx.accounts.asset;\r\n\r\n        // Verify current owner\r\n        require!(\r\n            asset.owner == ctx.accounts.current_owner.key(),\r\n            ErrorCode::Unauthorized\r\n        );\r\n\r\n        // Transfer ownership\r\n        asset.owner = ctx.accounts.new_owner.key();\r\n\r\n        msg!(\"Asset transferred to: {}\", asset.owner);\r\n        Ok(())\r\n    }\r\n}\r\n\r\n#[derive(Accounts)]\r\npub struct TransferAsset<'info> {\r\n    #[account(mut)]\r\n    pub asset: Account<'info, Asset>,\r\n    pub current_owner: Signer<'info>,\r\n    /// CHECK: New owner can be any account\r\n    pub new_owner: AccountInfo<'info>,\r\n}\r\n\r\n#[account]\r\npub struct Asset {\r\n    pub name: String,\r\n    pub uri: String,\r\n    pub owner: Pubkey,\r\n}\r\n\r\n#[error_code]\r\npub enum ErrorCode {\r\n    #[msg(\"Unauthorized: You are not the owner of this asset\")]\r\n    Unauthorized,\r\n}",
  "output": "",
  "full": "// [IMPORTS]\r\nuse anchor_lang::prelude::*;\r\n// [/IMPORTS]\r\n\r\n// [MAIN]\r\ndeclare_id!(\"Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS\");\r\n\r\n#[program]\r\npub mod transfer_asset {\r\n    use super::*;\r\n\r\n    // Transfer an existing NFT asset to a new owner\r\n    pub fn transfer(\r\n        ctx: Context<TransferAsset>\r\n    ) -> Result<()> {\r\n        let asset = &mut ctx.accounts.asset;\r\n\r\n        // Verify current owner\r\n        require!(\r\n            asset.owner == ctx.accounts.current_owner.key(),\r\n            ErrorCode::Unauthorized\r\n        );\r\n\r\n        // Transfer ownership\r\n        asset.owner = ctx.accounts.new_owner.key();\r\n\r\n        msg!(\"Asset transferred to: {}\", asset.owner);\r\n        Ok(())\r\n    }\r\n}\r\n\r\n#[derive(Accounts)]\r\npub struct TransferAsset<'info> {\r\n    #[account(mut)]\r\n    pub asset: Account<'info, Asset>,\r\n    pub current_owner: Signer<'info>,\r\n    /// CHECK: New owner can be any account\r\n    pub new_owner: AccountInfo<'info>,\r\n}\r\n\r\n#[account]\r\npub struct Asset {\r\n    pub name: String,\r\n    pub uri: String,\r\n    pub owner: Pubkey,\r\n}\r\n\r\n#[error_code]\r\npub enum ErrorCode {\r\n    #[msg(\"Unauthorized: You are not the owner of this asset\")]\r\n    Unauthorized,\r\n}\r\n// [/MAIN]\r\n"
}

export const metadata = {
  title: "Transfer an Asset",
  description: "Transfer ownership of an NFT asset to a new owner",
  tags: ['core', 'nft', 'transfer', 'beginner'],
}

export const examples = {
  kit: {
    framework: 'Kit',
    language: 'javascript',
    code: kitSections.full,
    sections: kitSections,
  },

  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

  shank: {
    framework: 'Shank',
    language: 'rust',
    code: shankSections.full,
    sections: shankSections,
  },

  anchor: {
    framework: 'Anchor',
    language: 'rust',
    code: anchorSections.full,
    sections: anchorSections,
  },

}
