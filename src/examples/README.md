# Centralized Code Examples

This directory contains centralized code examples that can be imported across multiple documentation pages and languages (EN/JA/KO).

## Directory Structure

```
src/examples/
└── core/
    ├── create-asset/
    │   ├── kit.js        # Native JavaScript file for Kit framework
    │   ├── umi.js        # Native JavaScript file for Umi framework
    │   ├── shank.rs      # Native Rust file for Shank
    │   ├── anchor.rs     # Native Rust file for Anchor
    │   └── index.js      # Auto-generated file (DO NOT EDIT)
    └── transfer-asset/
        ├── kit.js
        ├── umi.js
        ├── shank.rs
        ├── anchor.rs
        └── index.js      # Auto-generated file (DO NOT EDIT)
```

## Workflow: Adding a New Example

### 1. Create the Directory

```bash
mkdir -p src/examples/core/your-example-name
```

### 2. Create Native Code Files

Write your code in native files for full IDE syntax highlighting:

**kit.js** (JavaScript):
```javascript
import { someFunction } from '@metaplex-kit/core'

// Your Kit example code
const result = await someFunction()
console.log(result)
```

**umi.js** (JavaScript):
```javascript
import { createUmi } from '@metaplex-foundation/umi-bundle-defaults'

// Your Umi example code
const umi = createUmi('https://api.devnet.solana.com')
```

**shank.rs** (Rust):
```rust
use mpl_core::instructions::SomeInstruction;

// Your Shank example code
let instruction = SomeInstruction { /* ... */ };
```

**anchor.rs** (Rust):
```rust
use anchor_lang::prelude::*;

// Your Anchor example code
#[program]
pub mod your_program {
    // ...
}
```

### 3. Create the index.js Template

Create a basic `index.js` with metadata:

```javascript
/**
 * Example: Your Example Name
 *
 * Brief description of what this example does
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js and .rs files, then run: pnpm run build-examples
 */

export const metadata = {
  title: 'Your Example Name',
  description: 'Brief description',
  tags: ['core', 'nft', 'your-tag', 'beginner'],
}

export const examples = {}
```

### 4. Run the Build Script

The build script reads your native files and inlines them as strings:

```bash
pnpm run build-examples
```

This regenerates `index.js` with the code from your native files inlined as string constants.

### 5. Use in Documentation

In any markdown file (EN/JA/KO), import the example using the self-closing tag syntax `/%}`:

```markdown
## Create an Asset

{% code-tabs-imported from="core/your-example-name" /%}

## Show only JavaScript frameworks

{% code-tabs-imported from="core/your-example-name" frameworks="kit,umi" /%}

## Show only Rust frameworks

{% code-tabs-imported from="core/your-example-name" frameworks="shank,anchor" /%}

## Show only one framework

{% code-tabs-imported from="core/your-example-name" frameworks="umi" /%}
```

**IMPORTANT**: Note the `/%}` at the end (not just `%}`). This is Markdoc's self-closing tag syntax.

## Benefits

✅ **Single Source of Truth** - Edit once, updates everywhere
✅ **Multi-Language Docs** - Same code across EN/JA/KO translations
✅ **Native Syntax Highlighting** - Write in .js and .rs files with full IDE support
✅ **No Import Resolution** - Native files are never parsed by webpack
✅ **Framework Filtering** - Show only relevant frameworks per page
✅ **Testable** - Can import and test examples in CI
✅ **Reusable** - Use same example on multiple pages

## Important Notes

- ⚠️ **DO NOT edit `index.js` manually** - It's auto-generated
- ⚠️ **Always run `pnpm run build-examples`** after editing native files
- ⚠️ Native files can contain any code (imports won't be resolved by webpack)
- ⚠️ Webpack is configured to ignore these files via `noParse` in `next.config.js`

## Available Parameters

### code-tabs-imported

- `from` (required): Path to example (e.g., "core/create-asset")
- `frameworks` (optional): Comma-separated list of frameworks to show (default: "kit,umi,shank,anchor")
- `defaultFramework` (optional): Which framework to show by default (default: "umi")

## Testing

See the test page for live examples:
`/test-code-tabs`
