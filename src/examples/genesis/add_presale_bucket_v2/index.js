/**
 * Example: add_presale_bucket_v2
 *
 * 
 *
 * This file is auto-generated by scripts/build-examples.js
 * Edit the native .js/.ts and .rs files, then run: node scripts/build-examples.js
 */

const umiSections = {
  "imports": "import {\r\n  genesis,\r\n  addPresaleBucketV2,\r\n  findPresaleBucketV2Pda,\r\n  findUnlockedBucketV2Pda,\r\n} from '@metaplex-foundation/genesis'\r\nimport { mplToolbox } from '@metaplex-foundation/mpl-toolbox'\r\nimport { keypairIdentity, publicKey, sol } from '@metaplex-foundation/umi'\r\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults'",
  "setup": "const umi = createUmi('https://api.mainnet-beta.solana.com')\r\n  .use(mplToolbox())\r\n  .use(genesis())\r\n\r\n// umi.use(keypairIdentity(yourKeypair));\r\n\r\n// Assumes genesisAccount, baseMint, and TOTAL_SUPPLY from the Initialize step.",
  "main": "const [presaleBucket] = findPresaleBucketV2Pda(umi, { genesisAccount, bucketIndex: 0 })\r\nconst [unlockedBucket] = findUnlockedBucketV2Pda(umi, { genesisAccount, bucketIndex: 0 })\r\n\r\nconst now = BigInt(Math.floor(Date.now() / 1000))\r\nconst depositStart = now\r\nconst depositEnd = now + 86400n // 24 hours\r\nconst claimStart = depositEnd + 1n\r\nconst claimEnd = claimStart + 604800n // 1 week\r\n\r\nawait addPresaleBucketV2(umi, {\r\n  genesisAccount,\r\n  baseMint: baseMint.publicKey,\r\n  baseTokenAllocation: TOTAL_SUPPLY,\r\n  allocationQuoteTokenCap: 100_000_000_000n, // 100 SOL cap (sets price)\r\n\r\n  // Timing\r\n  depositStartCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: depositStart,\r\n    triggeredTimestamp: null,\r\n  },\r\n  depositEndCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: depositEnd,\r\n    triggeredTimestamp: null,\r\n  },\r\n  claimStartCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: claimStart,\r\n    triggeredTimestamp: null,\r\n  },\r\n  claimEndCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: claimEnd,\r\n    triggeredTimestamp: null,\r\n  },\r\n\r\n  // Optional: Deposit limits\r\n  minimumDepositAmount: null, // or { amount: sol(0.1).basisPoints }\r\n  depositLimit: null, // or { limit: sol(10).basisPoints }\r\n\r\n  // Where collected SOL goes after transition\r\n  endBehaviors: [\r\n    {\r\n      __kind: 'SendQuoteTokenPercentage',\r\n      padding: Array(4).fill(0),\r\n      destinationBucket: publicKey(unlockedBucket),\r\n      percentageBps: 10000, // 100%\r\n      processed: false,\r\n    },\r\n  ],\r\n}).sendAndConfirm(umi)",
  "output": "",
  "full": "// [IMPORTS]\r\nimport {\r\n  genesis,\r\n  addPresaleBucketV2,\r\n  findPresaleBucketV2Pda,\r\n  findUnlockedBucketV2Pda,\r\n} from '@metaplex-foundation/genesis'\r\nimport { mplToolbox } from '@metaplex-foundation/mpl-toolbox'\r\nimport { keypairIdentity, publicKey, sol } from '@metaplex-foundation/umi'\r\nimport { createUmi } from '@metaplex-foundation/umi-bundle-defaults'\r\n// [/IMPORTS]\r\n\r\n// [SETUP]\r\nconst umi = createUmi('https://api.mainnet-beta.solana.com')\r\n  .use(mplToolbox())\r\n  .use(genesis())\r\n\r\n// umi.use(keypairIdentity(yourKeypair));\r\n\r\n// Assumes genesisAccount, baseMint, and TOTAL_SUPPLY from the Initialize step.\r\n// [/SETUP]\r\n\r\n// [MAIN]\r\nconst [presaleBucket] = findPresaleBucketV2Pda(umi, { genesisAccount, bucketIndex: 0 })\r\nconst [unlockedBucket] = findUnlockedBucketV2Pda(umi, { genesisAccount, bucketIndex: 0 })\r\n\r\nconst now = BigInt(Math.floor(Date.now() / 1000))\r\nconst depositStart = now\r\nconst depositEnd = now + 86400n // 24 hours\r\nconst claimStart = depositEnd + 1n\r\nconst claimEnd = claimStart + 604800n // 1 week\r\n\r\nawait addPresaleBucketV2(umi, {\r\n  genesisAccount,\r\n  baseMint: baseMint.publicKey,\r\n  baseTokenAllocation: TOTAL_SUPPLY,\r\n  allocationQuoteTokenCap: 100_000_000_000n, // 100 SOL cap (sets price)\r\n\r\n  // Timing\r\n  depositStartCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: depositStart,\r\n    triggeredTimestamp: null,\r\n  },\r\n  depositEndCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: depositEnd,\r\n    triggeredTimestamp: null,\r\n  },\r\n  claimStartCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: claimStart,\r\n    triggeredTimestamp: null,\r\n  },\r\n  claimEndCondition: {\r\n    __kind: 'TimeAbsolute',\r\n    padding: Array(47).fill(0),\r\n    time: claimEnd,\r\n    triggeredTimestamp: null,\r\n  },\r\n\r\n  // Optional: Deposit limits\r\n  minimumDepositAmount: null, // or { amount: sol(0.1).basisPoints }\r\n  depositLimit: null, // or { limit: sol(10).basisPoints }\r\n\r\n  // Where collected SOL goes after transition\r\n  endBehaviors: [\r\n    {\r\n      __kind: 'SendQuoteTokenPercentage',\r\n      padding: Array(4).fill(0),\r\n      destinationBucket: publicKey(unlockedBucket),\r\n      percentageBps: 10000, // 100%\r\n      processed: false,\r\n    },\r\n  ],\r\n}).sendAndConfirm(umi)\r\n// [/MAIN]\r\n\r\n// [OUTPUT]\r\n// [/OUTPUT]\r\n"
}

export const metadata = {
  title: "add_presale_bucket_v2",
  description: "",
  tags: [],
}

export const examples = {
  umi: {
    framework: 'Umi',
    language: 'javascript',
    code: umiSections.full,
    sections: umiSections,
  },

}
